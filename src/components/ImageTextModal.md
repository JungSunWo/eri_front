# ImageTextModal 컴포넌트

이미지에 텍스트를 추가하는 공통 모달 컴포넌트입니다.

## 🚀 기능

- **실시간 미리보기**: 텍스트를 입력하거나 옵션을 변경할 때마다 즉시 미리보기가 업데이트됩니다
- **드래그 앤 드롭**: 마우스로 텍스트를 드래그하여 이미지 내에서 자유롭게 위치를 조정할 수 있습니다
- **하이퍼링크 추가**: 텍스트에 URL을 연결하여 클릭 가능한 링크를 생성할 수 있습니다
- **Canvas API 활용**: 브라우저의 Canvas API를 사용하여 이미지에 텍스트를 직접 그립니다
- **텍스트 스타일링**: 폰트 크기, 색상, 외곽선 색상, 위치 등을 자유롭게 조정할 수 있습니다
- **반응형 디자인**: 모바일부터 데스크톱까지 모든 화면 크기에 최적화되어 있습니다
- **자동 줄바꿈**: 긴 텍스트는 자동으로 줄바꿈되어 처리됩니다
- **직관적인 UI**: 설정 패널과 미리보기가 나란히 배치되어 편리한 사용이 가능합니다

## 📦 설치

컴포넌트는 이미 `src/components/ImageTextModal.js`에 위치해 있습니다.

## 🔧 사용법

### 기본 사용법

```jsx
import ImageTextModal from "@/components/ImageTextModal";

function MyComponent() {
  const [showModal, setShowModal] = useState(false);
  const [selectedFile, setSelectedFile] = useState(null);

  const handleImageTextConfirm = (processedImage) => {
    // 처리된 이미지로 원하는 작업 수행
    console.log("텍스트가 추가된 이미지:", processedImage);
  };

  return (
    <div>
      <input
        type="file"
        accept="image/*"
        onChange={(e) => {
          if (e.target.files && e.target.files[0]) {
            setSelectedFile(e.target.files[0]);
            setShowModal(true);
          }
        }}
      />

      <ImageTextModal
        isOpen={showModal}
        onClose={() => setShowModal(false)}
        imageFile={selectedFile}
        onConfirm={handleImageTextConfirm}
      />
    </div>
  );
}
```

### 고급 사용법 (기본 옵션 설정)

```jsx
<ImageTextModal
  isOpen={showModal}
  onClose={() => setShowModal(false)}
  imageFile={selectedFile}
  onConfirm={handleImageTextConfirm}
  defaultOptions={{
    fontSize: 32,
    color: "#ff0000",
    strokeColor: "#ffffff",
    position: "center",
  }}
/>
```

## 📋 Props

| Prop             | Type       | Required | Default | Description                                                              |
| ---------------- | ---------- | -------- | ------- | ------------------------------------------------------------------------ |
| `isOpen`         | `boolean`  | ✅       | -       | 모달 열림/닫힘 상태                                                      |
| `onClose`        | `function` | ✅       | -       | 모달 닫기 함수                                                           |
| `imageFile`      | `File`     | ✅       | -       | 텍스트를 추가할 이미지 파일                                              |
| `onConfirm`      | `function` | ✅       | -       | 텍스트 추가 완료 시 호출되는 함수 (processedImageFile을 매개변수로 받음) |
| `defaultOptions` | `object`   | ❌       | `{}`    | 기본 텍스트 옵션                                                         |

### defaultOptions 객체 구조

```javascript
{
  fontSize: 24,           // 폰트 크기 (px)
  color: '#ffffff',       // 텍스트 색상 (hex)
  strokeColor: '#000000', // 외곽선 색상 (hex)
  position: 'bottom'      // 텍스트 위치 ('top', 'center', 'bottom')
}
```

## 🎨 텍스트 옵션

### 위치 옵션

- **top**: 이미지 상단에 텍스트 배치
- **center**: 이미지 중앙에 텍스트 배치
- **bottom**: 이미지 하단에 텍스트 배치
- **드래그 위치**: 마우스로 텍스트를 드래그하여 자유롭게 위치 조정

### 색상 옵션

- **텍스트 색상**: 텍스트의 기본 색상
- **외곽선 색상**: 텍스트 주변의 외곽선 색상 (가독성 향상)
- **링크 색상**: 하이퍼링크가 설정된 경우 텍스트 색상을 별도로 설정

### 폰트 크기

- 범위: 12px ~ 72px
- 슬라이더를 통해 실시간으로 조정 가능

## 👀 실시간 미리보기

### 주요 특징

- **즉시 반영**: 텍스트 입력 시 실시간으로 미리보기 업데이트
- **옵션 변경**: 폰트 크기, 색상, 위치 변경 시 즉시 반영
- **원본 비교**: 텍스트가 없을 때는 원본 이미지 표시
- **고품질**: Canvas API를 사용한 고품질 미리보기

### 사용법

1. 텍스트를 입력하면 오른쪽 미리보기에서 즉시 확인 가능
2. 폰트 크기 슬라이더를 조정하여 실시간으로 크기 변경 확인
3. 색상 선택기를 사용하여 텍스트와 외곽선 색상 조정
4. 위치 선택으로 텍스트가 어디에 배치될지 미리 확인
5. "드래그 위치" 선택 후 텍스트를 마우스로 드래그하여 정확한 위치 조정
6. 링크 URL을 입력하여 클릭 가능한 하이퍼링크 텍스트 생성

## 🔗 하이퍼링크 기능

### 사용 방법

1. "링크 URL" 필드에 유효한 URL을 입력합니다 (예: https://example.com)
2. 링크가 설정되면 텍스트 색상이 링크 색상으로 변경됩니다
3. 링크 스타일 섹션에서 링크 색상과 밑줄 표시 여부를 조정할 수 있습니다
4. 실시간 미리보기에서 링크 스타일을 확인할 수 있습니다
5. 최종 이미지에서 텍스트 영역을 클릭하면 링크가 새 탭에서 열립니다

### 특징

- **URL 유효성 검사**: 입력된 URL의 형식을 자동으로 검증
- **링크 스타일링**: 링크 색상과 밑줄 표시를 독립적으로 설정
- **실제 클릭 가능**: HTML 오버레이를 사용하여 실제로 클릭 가능한 링크 구현
- **시각적 피드백**: 유효한 링크 입력 시 확인 메시지 표시
- **선택적 기능**: 링크 없이도 텍스트 추가 가능

### 기술적 구현

- **Canvas API**: 이미지에 텍스트와 링크 스타일을 그리기
- **HTML 오버레이**: 이미지 위에 투명한 클릭 영역을 오버레이로 추가
- **링크 정보 저장**: 파일별로 링크 정보를 별도 저장하여 관리
- **반환 데이터**: `{ imageFile, linkInfo }` 형태로 이미지와 링크 정보를 함께 반환

## 🖱️ 드래그 앤 드롭 기능

### 사용 방법

1. 위치 옵션에서 "드래그 위치"를 선택합니다
2. 미리보기 이미지에서 텍스트를 마우스로 클릭하고 드래그합니다
3. 원하는 위치에서 마우스를 놓으면 텍스트가 해당 위치에 배치됩니다
4. "초기화" 버튼을 클릭하면 기본 위치로 되돌립니다

### 특징

- **정확한 위치 조정**: 픽셀 단위로 정확한 위치 설정 가능
- **실시간 피드백**: 드래그하는 동안 실시간으로 위치 확인
- **경계 제한**: 이미지 영역을 벗어나지 않도록 자동 제한
- **직관적인 조작**: 마우스 커서가 변경되어 드래그 가능함을 표시

## 🔍 데모 페이지

컴포넌트의 사용법을 확인할 수 있는 데모 페이지가 있습니다:

- 경로: `/test/image-text-demo`
- 기능: 이미지 선택, 텍스트 추가, 결과 미리보기, 다운로드

## 💡 사용 팁

1. **가독성 향상**: 어두운 배경의 이미지에는 밝은 색상의 텍스트와 어두운 외곽선을 사용하세요.
2. **적절한 크기**: 이미지 크기에 비례하여 폰트 크기를 조정하세요.
3. **위치 선택**: 이미지의 중요한 부분을 가리지 않도록 텍스트 위치를 신중히 선택하세요.
4. **줄바꿈**: 긴 텍스트는 자동으로 줄바꿈되므로 자연스러운 문장을 작성하세요.

## 🛠️ 기술적 세부사항

### Canvas API 활용

- HTML5 Canvas API를 사용하여 이미지에 텍스트를 직접 그립니다
- 원본 이미지의 품질을 유지하면서 텍스트를 추가합니다

### 파일 처리

- 처리된 이미지는 Blob 형태로 변환되어 File 객체로 반환됩니다
- 원본 파일의 이름과 타입을 유지합니다

### 성능 최적화

- 이미지 로딩 완료 후에만 Canvas 작업을 수행합니다
- 메모리 누수를 방지하기 위해 적절한 정리 작업을 수행합니다

## 🐛 문제 해결

### 이미지가 로드되지 않는 경우

- 파일 형식이 지원되는 이미지 형식인지 확인하세요 (JPEG, PNG, GIF 등)
- 파일 크기가 너무 크지 않은지 확인하세요

### 텍스트가 보이지 않는 경우

- 텍스트 색상과 이미지 배경색의 대비를 확인하세요
- 외곽선 색상을 조정하여 가독성을 향상시키세요

### 성능 문제

- 매우 큰 이미지의 경우 처리 시간이 오래 걸릴 수 있습니다
- 필요에 따라 이미지 크기를 조정한 후 사용하세요

## 📄 라이선스

이 컴포넌트는 프로젝트 내부에서 자유롭게 사용할 수 있습니다.
